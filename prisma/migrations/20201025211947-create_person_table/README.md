# Migration `20201025211947-create_person_table`

This migration has been generated by Brian Sayler at 10/25/2020, 3:19:47 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."plant" ADD COLUMN "personId" integer   

CREATE TABLE "public"."person" (
"id" SERIAL,
"name" text   ,
"email" text   NOT NULL ,
"password" text   NOT NULL ,
"resetToken" text   ,
"resetTokenExpiry" Decimal(65,30)   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "person.email_unique" ON "public"."person"("email")

ALTER TABLE "public"."plant" ADD FOREIGN KEY ("personId")REFERENCES "public"."person"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200621160431-create_plant_table..20201025211947-create_person_table
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -16,7 +16,23 @@
   description   String?
   lastWateredAt DateTime @default(now())
   createdAt     DateTime @default(now())
   updatedAt     DateTime @default(now())
+  owner         Person?  @relation(fields: [personId], references: [id])
+  personId      Int?
   @@map(name: "plant")
 }
+
+model Person {
+  id               Int      @id @default(autoincrement())
+  name             String?
+  email            String   @unique
+  password         String
+  resetToken       String?
+  resetTokenExpiry Float?
+  createdAt        DateTime @default(now())
+  updatedAt        DateTime @default(now())
+  plants           Plant[]
+
+  @@map(name: "person")
+}
```


